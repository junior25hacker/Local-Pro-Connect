{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Rejection Modal - Local Pro Connect{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/rejection_modal.css' %}">
</head>
<body>
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="rejectionModalOverlay">
        <!-- Modal Container -->
        <div class="rejection-modal" id="rejectionModal">
            <!-- Modal Header -->
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-icon-wrapper">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <h2 class="modal-title">Reject Service Request</h2>
                </div>
                <button class="modal-close-btn" id="closeModalBtn" aria-label="Close modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <form method="POST" id="rejectionForm" class="rejection-form">
                    {% csrf_token %}
                    
                    <!-- Instructions -->
                    <p class="modal-description">
                        Please select a reason for rejecting this service request. Your feedback helps us improve our matching system.
                    </p>

                    <!-- Rejection Reasons Section -->
                    <div class="form-section">
                        <label class="section-label">
                            <i class="fas fa-list-check"></i>
                            Select Rejection Reason <span class="required">*</span>
                        </label>
                        
                        <div class="reason-options" id="reasonOptions">
                            <!-- Distance Option -->
                            <div class="reason-card" data-reason="distance">
                                <input type="radio" name="rejection_reason" value="distance" id="reason_distance" required>
                                <label for="reason_distance" class="reason-label">
                                    <div class="reason-icon">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </div>
                                    <div class="reason-content">
                                        <h4 class="reason-title">Distance</h4>
                                        <p class="reason-subtitle">Location is too far from my service area</p>
                                    </div>
                                    <div class="reason-checkmark">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </label>
                            </div>

                            <!-- Price Option -->
                            <div class="reason-card" data-reason="price">
                                <input type="radio" name="rejection_reason" value="price" id="reason_price" required>
                                <label for="reason_price" class="reason-label">
                                    <div class="reason-icon">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <div class="reason-content">
                                        <h4 class="reason-title">Price</h4>
                                        <p class="reason-subtitle">Budget doesn't match my pricing</p>
                                    </div>
                                    <div class="reason-checkmark">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </label>
                            </div>

                            <!-- Time Option -->
                            <div class="reason-card" data-reason="time">
                                <input type="radio" name="rejection_reason" value="time" id="reason_time" required>
                                <label for="reason_time" class="reason-label">
                                    <div class="reason-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="reason-content">
                                        <h4 class="reason-title">Time</h4>
                                        <p class="reason-subtitle">Schedule doesn't work for me</p>
                                    </div>
                                    <div class="reason-checkmark">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </label>
                            </div>

                            <!-- Other Option -->
                            <div class="reason-card" data-reason="other">
                                <input type="radio" name="rejection_reason" value="other" id="reason_other" required>
                                <label for="reason_other" class="reason-label">
                                    <div class="reason-icon">
                                        <i class="fas fa-ellipsis-h"></i>
                                    </div>
                                    <div class="reason-content">
                                        <h4 class="reason-title">Other</h4>
                                        <p class="reason-subtitle">Different reason not listed above</p>
                                    </div>
                                    <div class="reason-checkmark">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Error Message -->
                        <div class="error-message" id="reasonError" style="display: none;">
                            <i class="fas fa-exclamation-circle"></i>
                            Please select a rejection reason before continuing.
                        </div>
                    </div>

                    <!-- Selected Reason Display -->
                    <div class="selected-reason-display" id="selectedReasonDisplay" style="display: none;">
                        <div class="selected-reason-content">
                            <i class="fas fa-info-circle"></i>
                            <span class="selected-reason-text">
                                You selected: <strong id="selectedReasonText"></strong>
                            </span>
                        </div>
                    </div>

                    <!-- Description Section -->
                    <div class="form-section description-section" id="descriptionSection" style="display: none;">
                        <label for="rejection_description" class="section-label">
                            <i class="fas fa-comment-dots"></i>
                            Additional Details <span class="optional">(Optional)</span>
                        </label>
                        <textarea 
                            name="rejection_description" 
                            id="rejection_description" 
                            class="description-textarea"
                            rows="4"
                            placeholder="Please provide more details about your reason for rejection. This information helps us improve our service and may be shared with the customer."
                            maxlength="500"
                        ></textarea>
                        <div class="character-count">
                            <span id="charCount">0</span>/500 characters
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">
                            <i class="fas fa-arrow-left"></i>
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-danger" id="submitBtn" disabled>
                            <i class="fas fa-paper-plane"></i>
                            Submit Rejection
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="{% static 'js/rejection_modal.js' %}"></script>
</body>
</html>
